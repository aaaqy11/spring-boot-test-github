<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="keywords" content="">
    <title>用户注册</title>
    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/fontello.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/animsition.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700|Merriweather:300,300i,400,400i,700,700i" rel="stylesheet">
    <!-- owl Carousel Css -->
    <link href="../css/owl.carousel.css" rel="stylesheet">
    <link href="../css/owl.theme.css" rel="stylesheet">
</head>

<body class="animsition">
<div class="top-bar">
    <!-- top-bar -->
    <div class="container">
        <div class="row" style="font-size: 17px;">
            <div class="col-md-4 hidden-xs hidden-sm">
                <p class="mail-text">欢迎注册</p>
            </div>
            <div class="col-md-8 col-sm-12 text-right col-xs-12">
                <div class="top-nav">
                    <span class="top-text"><a href="/power/toLogin">已有账号，去登录</a></span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /.top-bar -->
<div class="header">
</div>

<div>
    <div style="margin-top:30px;margin-left:200px;margin-bottom:30px;width:550px;">
        <form>
            <div class="form-group">
                <label>用户名&nbsp;&nbsp;&nbsp;<span id="spanOne"></span></label>
                <input type="text" class="form-control" id="userName" placeholder="用户名4-12位，必须以字母开头，不能带有中文和特殊字符">
                <input type="button" class="btn btn-primary btn-sm" value="查看用户名是否被注册" id="checkExist">
                &nbsp;&nbsp;&nbsp;<span id="spanZro"></span>
            </div>
            <div class="form-group">
                <label>密码&nbsp;&nbsp;&nbsp;<span id="spanTwo"></span></label>
                <input type="password" class="form-control" id="userPsw" placeholder="密码长度为6-16位，可以是字母、数字或字母和数字的组合">
            </div>
            <div class="form-group">
                <label>确认密码&nbsp;&nbsp;&nbsp;<span id="spanThr"></span></label>
                <input type="password" class="form-control" id="userPswAno" placeholder="请再次输入密码">
            </div>
            <div class="form-group">
                <label>员工编号&nbsp;&nbsp;&nbsp;<span id="spanFiv"></span></label>
                <input type="number" class="form-control" id="emp_Id" placeholder="请输入编号">
            </div>
            <div class="form-group">
                <label>员工姓名&nbsp;&nbsp;&nbsp;<span id="spanSix"></span></label>
                <input type="text" class="form-control" id="emp_Name" placeholder="请输入姓名">
            </div>
            <div class="form-group">
                <label>手机号&nbsp;&nbsp;&nbsp;<span id="spanFur"></span></label>
                <input type="text" class="form-control" id="userPhone" placeholder="请输入正确的手机号码">
            </div>
            <div class="form-group">
            <label>员工部门&nbsp;&nbsp;&nbsp;<span id="spanSev"></span></label><br>
                <select  id="emp_Dept" class="form-control">
                        <option value="1" selected>研发部</option>
                        <option value="2">技术部</option>
                        <option value="3">销售部</option>
                        <option value="4">运维部</option>
                        <option value="5">市场部</option>
                        <option value="6">财务部</option>
                </select>
            </div>
            <div class="form-group">
            <label>员工性别&nbsp;&nbsp;&nbsp;<span id="spanEit"></span></label>
                <form id="emp_Sex">
                <br><input type="radio"  name="emp_sex" value="男">男
                    <input type="radio"  name="emp_sex" value="女">女
                </form>
            </div>
            <input type="button" class="btn btn-default btn-sm" id="canRegister" value="注册">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="checkbox" checked>同意<a href="#">用户使用协议</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span id="submitSpan"></span>
        </form>
    </div>
</div>

<!-- /9.footer -->
<div class="tiny-footer">
    <!-- tiny footer -->
    <div class="container" style="font-size: 15px;">
        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-6">
                <p>©2018  All rights reserved   |   万泰管理有限公司</p>
            </div>
            <div class="col-md-6 col-sm-6 text-right col-xs-6">
                </br><p>欢迎注册万泰电子 | 信息请到后台完善 </p>
            </div>
        </div>
    </div>
</div>
<!-- /.tiny footer -->

<style>
    span {color:firebrick;}
</style>

<!-- back to top icon -->
<a href="#0" class="cd-top" title="Go to top">Top</a>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="../js/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../js/menumaker.js"></script>
<!-- animsition -->
<script type="text/javascript" src="../js/animsition.js"></script>
<script type="text/javascript" src="../js/animsition-script.js"></script>
<!-- sticky header -->
<script type="text/javascript" src="../js/jquery.sticky.js"></script>
<script type="text/javascript" src="../js/sticky-header.js"></script>
<!-- slider script -->
<script type="text/javascript" src="../js/owl.carousel.min.js"></script>
<script type="text/javascript" src="../js/slider-carousel.js"></script>
<script type="text/javascript" src="../js/service-carousel.js"></script>
<!-- Back to top script -->
<script src="../js/back-to-top.js" type="text/javascript"></script>

<script>
    //用户名格式校验
    $("#userName").blur(function () {
        var reg = /^[a-zA-Z]{1}\w+$/;
        if ($("#userName").val() == null || $("#userName").val() == "") {
            $("#spanOne").html("用户名不能为空！");
        } else if (reg.test($("#userName").val()) && $("#userName").val().length >= 4 && $("#userName").val().length <= 12) {
            $("#spanOne").html("用户名格式正确！");
        } else {
            $("#spanOne").html("用户名格式不正确！");
        }
    });
    //用户名唯一性校验
    $("#checkExist").click(function () {
        $.post("/fowardUser/userExist", {username:$("#userName").val()}, function (data) {
            if (data > 0) {
                $("#spanZro").html("该用户名已被注册！");
            } else {
                $("#spanZro").html("该用户名可以使用！");
            }
        });
    });
    //密码格式校验
    $("#userPsw").blur(function () {
        var reg = /^\w+$/;
        if ($("#userPsw").val() == null || $("#userPsw").val() == "") {
            $("#spanTwo").html("密码不能为空！");
        } else if (reg.test($("#userPsw").val()) && $("#userPsw").val().length >= 6 && $("#userPsw").val().length <= 16) {
            $("#spanTwo").html("密码格式正确！");
        } else {
            $("#spanTwo").html("密码格式不正确！");
        }
    });
    //再次输入密码一致性校验
    $("#userPswAno").blur(function () {
        if ($("#userPswAno").val() != $("#userPsw").val()) {
            $("#spanThr").html("两次输入的密码不一致！");
        } else {
            $("#spanThr").html("密码有效！");
        }
    });
    //手机号格式校验
    $("#userPhone").blur(function () {
        var reg = /^1[3-9][0-9]{9}$/;
        if ($("#userPhone").val() == null || $("#userPhone").val() == "") {
            $("#spanFur").html("手机号不能为空！");
        } else if (reg.test($("#userPhone").val())) {
            $("#spanFur").html("手机号格式正确！");
        } else {
            $("#spanFur").html("手机号格式不正确！");
        }
    });
    //员工编号格式校验
    $("#emp_Id").blur(function () {
        if ($("#emp_Id").val() == null || $("#emp_Id").val() == "") {
            $("#spanFiv").html("员工编号不能为空！");
        }
    });
    //员工姓名格式校验
    $("#emp_Name").blur(function () {
        if ($("#emp_Name").val() == null || $("#emp_Name").val() == "") {
            $("#spanSix").html("员工姓名不能为空！");
        }
    });
    //员工部门格式校验
    $("#emp_Dept").blur(function () {
        if ($("#emp_Dept").val() == null || $("#emp_Dept").val() == "") {
            $("#spanSev").html("员工部门不能为空！");
        }
    });
    //员工性别格式校验
    $("#emp_Sex").blur(function () {
        if ($("#emp_Sex").val() == null || $("#emp_Sex").val() == "") {
            $("#spanEit").html("员工性别不能为空！");
        }
    });
    //注册
    $("#canRegister").click(function () {
        var formCode = 0;
        if ($("#spanZro").html() == "该用户名可以使用！") {
            formCode += 1;
        }
        if ($("#spanOne").html() == "用户名格式正确！") {
            formCode += 1;
        }
        if ($("#spanTwo").html() == "密码格式正确！") {
            formCode += 1;
        }
        if ($("#spanThr").html() == "密码有效！") {
            formCode += 1;
        }
        if ($("#spanFur").html() == "手机号格式正确！") {
            formCode += 1;
        }
        if (formCode != 3 && formCode != 4) {
            alert(formCode);
            $("#submitSpan").html("请核实表单内容");
        } else {
            alert(1111);
            $.post("/emp/toInUserEmp", {
                emp_id : $("#emp_Id").val(),
                emp_name : $("#emp_Name").val(),
                emp_dept : $("#emp_Dept").val(),
                emp_sex : $("#emp_Sex").val(),
                emp_phone : $("#userPhone").val(),
                username : $("#userName").val(),
                password : $("#userPsw").val()
            }, function (data) {
                alert(data);
                if (data > 0) {
                        location.href = "/power/toLogin"
                        alert("成功");
                }
            });
        }
    });
</script>

</body>

</html>
